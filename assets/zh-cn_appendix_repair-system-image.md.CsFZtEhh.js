import{_ as s,c as i,o as a,a3 as t}from"./chunks/framework.CUNmKlv3.js";const e="/mspcm-docs/assets/scanhealth.C1g3TOj_.png",l="/mspcm-docs/assets/checkhealth.tZx4612u.png",p="/mspcm-docs/assets/restorehealth.DTLYkKxe.png",n="/mspcm-docs/assets/sfc.BRZaJ4a7.png",o="/mspcm-docs/assets/error.BzyqJgqy.png",r="/mspcm-docs/assets/win10-iso.OmL98rew.png",h="/mspcm-docs/assets/agreement.CdCKaGfR.png",c="/mspcm-docs/assets/upgrade.C-Vn_ROC.png",d="/mspcm-docs/assets/for-this-PC.CSny4yX4.png",m="/mspcm-docs/assets/ISO-file.y1DkK_JV.png",k="/mspcm-docs/assets/select-folder.C5WYU5qA.png",g="/mspcm-docs/assets/install.CEWWd996.png",_="/mspcm-docs/assets/waiting.B-w0IcG6.png",w="/mspcm-docs/assets/setup.C8lLEvYD.png",E="/mspcm-docs/assets/continue.Cxg_ID1U.png",u="/mspcm-docs/assets/agreement.C-ODWZA3.png",y="/mspcm-docs/assets/install.CEWWd996.png",f="/mspcm-docs/assets/waiting.B-w0IcG6.png",M=JSON.parse('{"title":"使用 DISM & SFC 命令功能修复损坏的系统映像","description":"","frontmatter":{},"headers":[],"relativePath":"zh-cn/appendix/repair-system-image.md","filePath":"zh-cn/appendix/repair-system-image.md","lastUpdated":1719511294000}'),C={name:"zh-cn/appendix/repair-system-image.md"},b=t('<h1 id="使用-dism-sfc-命令功能修复损坏的系统映像" tabindex="-1">使用 DISM &amp; SFC 命令功能修复损坏的系统映像 <a class="header-anchor" href="#使用-dism-sfc-命令功能修复损坏的系统映像" aria-label="Permalink to &quot;使用 DISM &amp; SFC 命令功能修复损坏的系统映像&quot;">​</a></h1><p><strong>特别提示：该功能并不能 100% 修复所有损坏的映像，必要时请参阅<a href="#镜像修复">《如何使用镜像对 Windows 进行修复》</a></strong></p><p>按下Windows 徽标键+X，并选择“PowerShell(管理员)”或“终端(管理员)”。</p><h2 id="检查系统文件是否损坏并修复" tabindex="-1">检查系统文件是否损坏并修复 <a class="header-anchor" href="#检查系统文件是否损坏并修复" aria-label="Permalink to &quot;检查系统文件是否损坏并修复&quot;">​</a></h2><p>扫描映像以检查是否损坏，命令操作可能需要几分钟才能完成。</p><div class="language-PowerShell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">PowerShell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DISM.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Online </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Cleanup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ScanHealth</span></span></code></pre></div><p><img src="'+e+'" alt=""></p><p>检查映像以查看是否检测到任何损坏，命令操作可能需要几分钟才能完成。</p><div class="language-PowerShell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">PowerShell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DISM.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Online </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Cleanup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CheckHealth</span></span></code></pre></div><p><img src="'+l+'" alt=""></p><details><summary>关于映像检查</summary> 当您使用 /CheckHealth 参数时，DISM 工具将报告映像是否正常、可修复或不可修复。 <p>如果映像不可修复，在尝试使用 <a href="#media-creation-tool-修复升级">《Media Creation Tool 修复升级》</a>失败后，应当使用由 Microsoft 提供的系统镜像执行 <strong>重新安装</strong>。</p><p>如果映像是可修复的，您可以遵循下一步，使用 /RestoreHealth 参数来修复映像。（本章不对使用指定的映像源进行详解，有需要请参阅 <a href="https://learn.microsoft.com/troubleshoot/windows-server/deployment/fix-windows-update-errors" target="_blank" rel="noreferrer">Microsoft Learn</a>）</p></details><p>修复损坏的映像，命令操作可能需要几分钟才能完成。</p><div class="language-PowerShell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">PowerShell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DISM.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Online </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Cleanup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RestoreHealth</span></span></code></pre></div><p><img src="'+p+'" alt=""></p><p>使用 SFC 扫描并修复 Windows 资源，命令操作可能需要几分钟才能完成。</p><div class="language-PowerShell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">PowerShell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SFC </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SCANNOW</span></span></code></pre></div><p><img src="'+n+'" alt=""></p><p>完成并重启后，部分由系统损坏带来的问题将被修复。如有需要，您可再次执行 Windows 更新。</p><h2 id="如果遇到其它错误" tabindex="-1">如果遇到其它错误 <a class="header-anchor" href="#如果遇到其它错误" aria-label="Permalink to &quot;如果遇到其它错误&quot;">​</a></h2><p>如下图所示，在检查映像/修复损坏的映像时遇到“错误：&lt;错误代码&gt;”的提示，且 自行解决无果，您则需要请参阅<a href="#镜像修复">《如何使用镜像对 Windows 进行修复》</a>进行系统修复。</p><p><img src="'+o+'" alt=""></p><h1 id="使用镜像对-windows-进行修复" tabindex="-1">使用镜像对 Windows 进行修复 <a class="header-anchor" href="#使用镜像对-windows-进行修复" aria-label="Permalink to &quot;使用镜像对 Windows 进行修复&quot;">​</a></h1><p><a href="https://www.microsoft.com/software-download/windows10ISO" target="_blank" rel="noreferrer">Windows 10</a> | <a href="https://www.microsoft.com/software-download/windows11" target="_blank" rel="noreferrer">Windows 11</a> | <a href="https://www.microsoft.com/en-us/software-download/windowsinsiderpreviewiso" target="_blank" rel="noreferrer">Windows Insider</a></p><details><summary>关于 Windows 10 镜像下载</summary><div class="warning custom-block"><p class="custom-block-title">提示</p><p>Windows 10 不再在电脑端网页单独提供 ISO 下载，如果有需要，请在下载页面上按下 F12，再按下 Ctrl+Shift+M，然后按下 F5 刷新页面，最后按下 F12 即可。</p></div><p><img src="'+r+'" alt=""></p></details><p>以下方式二选一即可。</p><h2 id="media-creation-tool-修复升级" tabindex="-1">Media Creation Tool 修复升级 <a class="header-anchor" href="#media-creation-tool-修复升级" aria-label="Permalink to &quot;Media Creation Tool 修复升级&quot;">​</a></h2><p>下载 Media Creation Tool：<a href="https://go.microsoft.com/fwlink/?LinkId=691209" target="_blank" rel="noreferrer">Windows 10</a> | <a href="https://go.microsoft.com/fwlink/?linkid=2156295" target="_blank" rel="noreferrer">Windows 11</a></p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>Windows 11 的 Media Creation Tool 仅能创建 ISO 镜像，而 Windows 10 可以直接使用 Media Creation Tool 升级/修复系统。</p></div><ol><li><p><img src="'+h+'" alt=""></p></li><li><p><img src="'+c+'" alt=""></p></li></ol><details><summary>若是 Windows 11 则会有以下选项</summary><hr><ul><li><p>a. <img src="'+d+'" alt=""></p></li><li><p>b. <img src="'+m+'" alt=""></p></li><li><p>c. <img src="'+k+'" alt=""></p></li></ul><h2 id="创建完成后请参阅-镜像修复" tabindex="-1">创建完成后请参阅 <a href="#镜像修复">镜像修复</a> <a class="header-anchor" href="#创建完成后请参阅-镜像修复" aria-label="Permalink to &quot;创建完成后请参阅 [镜像修复](#镜像修复)&quot;">​</a></h2></details><ol start="3"><li><p><img src="'+g+'" alt=""></p></li><li><p><img src="'+_+'" alt=""></p></li></ol><p>双击 .ISO 镜像文件使文件资源管理器自动挂载虚拟镜像，然后使用镜像根目录下的 Setup 应用程序对系统进行修复。（升级，所需时间≥30min）</p><ol><li><p><img src="'+w+'" alt=""></p></li><li><p><img src="'+E+'" alt=""></p></li><li><p><img src="'+u+'" alt=""></p></li><li><p><img src="'+y+'" alt=""></p></li><li><p><img src="'+f+'" alt=""></p></li></ol>',33),S=[b];function v(D,F,W,x,I,P){return a(),i("div",null,S)}const q=s(C,[["render",v]]);export{M as __pageData,q as default};
